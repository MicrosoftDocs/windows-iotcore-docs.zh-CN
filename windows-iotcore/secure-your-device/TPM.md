---
title: 受信任的平台模块 (TPM)
author: saraclay
ms.author: saclayt
ms.date: 08/28/2017
ms.topic: article
description: 了解如何使用受信任的平台模块启用加密功能, 从而更好地保护设备。
keywords: windows iot, 安全性, 受信任的平台模块, TPM, 加密, 密钥
ms.openlocfilehash: 70552a5f98891281879f1d45cbdbd671b56dd902
ms.sourcegitcommit: 77b86eee2bba3844e87f9d3dbef816761ddf0dd9
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/11/2019
ms.locfileid: "65533321"
---
# <a name="trusted-platform-module-tpm-on-windows-10-iot-core"></a><span data-ttu-id="a0411-104">Windows 10 IoT Core 上的受信任的平台模块 (TPM)</span><span class="sxs-lookup"><span data-stu-id="a0411-104">Trusted Platform Module (TPM) on Windows 10 IoT Core</span></span>

## <a name="what-is-tpm"></a><span data-ttu-id="a0411-105">什么是 TPM？</span><span class="sxs-lookup"><span data-stu-id="a0411-105">What is TPM?</span></span>
<span data-ttu-id="a0411-106">受信任的平台模块 (TPM) 是加密协处理器，其中包含随机数生成、加密密钥的安全生成以及它们的使用限制的功能。</span><span class="sxs-lookup"><span data-stu-id="a0411-106">A Trusted Platform Module (TPM), is a cryptographic coprocessor including capabilities for random number generation, secure generation of cryptographic keys and limitation of their use.</span></span> <span data-ttu-id="a0411-107">它还包括诸如远程证明和密封存储等功能。</span><span class="sxs-lookup"><span data-stu-id="a0411-107">It also includes capabilities such as remote attestation and sealed storage.</span></span>
<span data-ttu-id="a0411-108">TPM 的技术规范由受信任的计算组 (TCG) 来制定并公开发行。</span><span class="sxs-lookup"><span data-stu-id="a0411-108">TPM's technical specification is publicly available, driven by the Trusted Computing Group (TCG).</span></span> <span data-ttu-id="a0411-109">最新版本的 TPM 2.0（2014 年 10 月发布）主要对规范进行了重新设计，该版本添加了新的功能并修复了之前 TPM 1.2 的缺陷。</span><span class="sxs-lookup"><span data-stu-id="a0411-109">The latest version TPM 2.0 (released October 2014), is a major redesign of the specification which adds new functionality and fixes weaknesses of the former TPM 1.2.</span></span>

## <a name="why-tpm"></a><span data-ttu-id="a0411-110">为什么选择 TPM？</span><span class="sxs-lookup"><span data-stu-id="a0411-110">Why TPM?</span></span>  
<span data-ttu-id="a0411-111">采用 TPM 的计算机可以创建加密密钥并对它们加密，这样一来它们只能由 TPM 进行解密。</span><span class="sxs-lookup"><span data-stu-id="a0411-111">Computers that incorporate a TPM can create cryptographic keys and encrypt them so that they can only be decrypted by the TPM.</span></span> <span data-ttu-id="a0411-112">此过程（通常称为“封装”或“绑定”密钥）可以帮助保护密钥以避免泄露。</span><span class="sxs-lookup"><span data-stu-id="a0411-112">This process, often called **"wrapping"** or **"binding"** a key, can help protect the key from disclosure.</span></span> <span data-ttu-id="a0411-113">每个 TPM 都有一个主“封装”密钥（称为存储根密钥），它存储在 TPM 本身的内部。</span><span class="sxs-lookup"><span data-stu-id="a0411-113">Each TPM has a master "wrapping" key, called the storage root key, which is stored within the TPM itself.</span></span> <span data-ttu-id="a0411-114">TPM 中创建的密钥的私钥部分永远不会公开给任何其他组件、软件、进程或用户。</span><span class="sxs-lookup"><span data-stu-id="a0411-114">The private portion of a key created in a TPM is never exposed to any other component, software, process, or person.</span></span>  

<span data-ttu-id="a0411-115">采用 TPM 的计算机还可以创建一个密钥，该密钥不仅可被封装而且还可以被绑定到特定平台测量。</span><span class="sxs-lookup"><span data-stu-id="a0411-115">Computers that incorporate a TPM can also create a key that has not only been wrapped but is also tied to certain platform measurements.</span></span> <span data-ttu-id="a0411-116">仅当这些平台测量具有的值与创建该密钥时所具有的值相同时，才可以解封此类型的密钥。</span><span class="sxs-lookup"><span data-stu-id="a0411-116">This type of key can only be unwrapped when those platform measurements have the same values that they had when the key was created.</span></span> <span data-ttu-id="a0411-117">此过程称为将密钥“封装”到 TPM。</span><span class="sxs-lookup"><span data-stu-id="a0411-117">This process is called **"sealing"** the key to the TPM.</span></span> <span data-ttu-id="a0411-118">解密密钥的过程称为“解封”。</span><span class="sxs-lookup"><span data-stu-id="a0411-118">Decrypting the key is called **"unsealing"**.</span></span> <span data-ttu-id="a0411-119">TPM 还可以对 TPM 外部生成的数据进行封装和解封。</span><span class="sxs-lookup"><span data-stu-id="a0411-119">The TPM can also seal and unseal data generated outside of the TPM.</span></span> <span data-ttu-id="a0411-120">使用此封装的密钥和软件（例如 BitLocker 驱动器加密），可以锁定数据，直到符合特定的硬件或软件条件为止。</span><span class="sxs-lookup"><span data-stu-id="a0411-120">With this sealed key and software such as BitLocker Drive Encryption, you can lock data until specific hardware or software conditions are met.</span></span>  

<span data-ttu-id="a0411-121">借助 TPM，可保持密钥对的私钥部分独立于操作系统控制的内存。</span><span class="sxs-lookup"><span data-stu-id="a0411-121">With a TPM, private portions of key pairs are kept separate from the memory controlled by the operating system.</span></span> <span data-ttu-id="a0411-122">可以将密钥封装到 TPM，并且在解封并释放该密钥以供使用之前，可以就系统的状态（定义系统”可信赖”的保证）提供某些保证。</span><span class="sxs-lookup"><span data-stu-id="a0411-122">Keys can be sealed to the TPM, and certain assurances about the state of a system (assurances that define the "trustworthiness" of a system) can be made before the keys are unsealed and released for use.</span></span> <span data-ttu-id="a0411-123">由于 TPM 使用自己的内部固件和逻辑电路来处理指令，因此它不依赖于操作系统，并且它不会公开给操作系统或应用程序软件中可能存在的安全漏洞。</span><span class="sxs-lookup"><span data-stu-id="a0411-123">Because the TPM uses its own internal firmware and logic circuits for processing instructions, it does not rely on the operating system and is not exposed to vulnerabilities that might exist in the operating system or application software.</span></span>

## <a name="tpm-architecture"></a><span data-ttu-id="a0411-124">TPM 体系结构</span><span class="sxs-lookup"><span data-stu-id="a0411-124">TPM Architecture</span></span>
<span data-ttu-id="a0411-125">_TPM 1.2 和 TPM 2.0 之间的区别。_</span><span class="sxs-lookup"><span data-stu-id="a0411-125">_Difference between TPM 1.2 and TPM 2.0._</span></span>  
<span data-ttu-id="a0411-126">TPM 规范已开发了两次。</span><span class="sxs-lookup"><span data-stu-id="a0411-126">The TPM specification has been developed twice.</span></span> <span data-ttu-id="a0411-127">第一次是从 1.1 b 开发到 1.2, 其中包含由规范委员会请求/确定的新功能。</span><span class="sxs-lookup"><span data-stu-id="a0411-127">The first time, it developed from 1.1b to 1.2, incorporating  new capabilities requested/identified by the specification committee.</span></span> <span data-ttu-id="a0411-128">此种功能扩展形式的演变使得最终的 TPM 1.2 规范非常复杂。</span><span class="sxs-lookup"><span data-stu-id="a0411-128">This feature-creep form of evolution made the final TPM 1.2 specification very complicated.</span></span> <span data-ttu-id="a0411-129">最后，SHA-1（TPM 1.2 中最强的商业算法）加密缺陷的暴露导致有必要对规范进行更改。</span><span class="sxs-lookup"><span data-stu-id="a0411-129">Eventually, cryptographic weaknesses of SHA-1 (which was the strongest commercial algorithm in TPM 1.2) were revealed which caused the need for a change.</span></span> <span data-ttu-id="a0411-130">从头开始重新设计 TPM 体系结构，从而诞生更集成和统一设计的 TPM 2.0。</span><span class="sxs-lookup"><span data-stu-id="a0411-130">The TPM architecture was redesigned from scratch, resulting in the much more integrated and unified design of TPM 2.0.</span></span>  

<span data-ttu-id="a0411-131">相较于以前的 TPM 1.2，更改和增强功能如下所示：</span><span class="sxs-lookup"><span data-stu-id="a0411-131">The changes and enhancements compared to the previous TPM 1.2 include:</span></span>

* <span data-ttu-id="a0411-132">对其他加密算法的支持</span><span class="sxs-lookup"><span data-stu-id="a0411-132">Support for additional cryptographic algorithms</span></span>
* <span data-ttu-id="a0411-133">应用程序的 TPM 可用性增强</span><span class="sxs-lookup"><span data-stu-id="a0411-133">Enhancements to the availability of the TPM to applications</span></span>
* <span data-ttu-id="a0411-134">增强的授权机制</span><span class="sxs-lookup"><span data-stu-id="a0411-134">Enhanced authorization mechanisms</span></span>
* <span data-ttu-id="a0411-135">简化的 TPM 管理</span><span class="sxs-lookup"><span data-stu-id="a0411-135">Simplified TPM management</span></span>
* <span data-ttu-id="a0411-136">增强平台服务安全性的其他功能</span><span class="sxs-lookup"><span data-stu-id="a0411-136">Additional capabilities to enhance the security of platform services</span></span>

> [!NOTE] 
> <span data-ttu-id="a0411-137">Windows IoT Core 仅支持 TPM 2.0, 并且不支持过时的 TPM 1.2。</span><span class="sxs-lookup"><span data-stu-id="a0411-137">Windows IoT Core supports only TPM 2.0 and does not support the outdated TPM 1.2.</span></span>

## <a name="what-is-tbs"></a><span data-ttu-id="a0411-138">什么是 TBS？</span><span class="sxs-lookup"><span data-stu-id="a0411-138">What is TBS?</span></span> 
<span data-ttu-id="a0411-139">TPM 基本服务 (TBS) 功能是系统服务，支持透明共享 TPM 资源。</span><span class="sxs-lookup"><span data-stu-id="a0411-139">The TPM Base Services (TBS) feature is a system service that allows transparent sharing of the TPM resources.</span></span> <span data-ttu-id="a0411-140">它通过远程过程调用 (RPC) 在同一台物理计算机上的多个应用程序之间共享 TPM 资源。</span><span class="sxs-lookup"><span data-stu-id="a0411-140">It shares the TPM resources among multiple applications on the same physical machine through remote procedure calls (RPC).</span></span> <span data-ttu-id="a0411-141">它使用调用应用程序指定的优先级来集中跨应用程序的 TPM 访问。</span><span class="sxs-lookup"><span data-stu-id="a0411-141">It centralizes TPM access across applications using priorities specified by the calling applications.</span></span>  

<span data-ttu-id="a0411-142">TPM 提供加密功能，设计用于提供平台内的信任。</span><span class="sxs-lookup"><span data-stu-id="a0411-142">The TPM provides cryptographic functions designed to provide trust in the platform.</span></span> <span data-ttu-id="a0411-143">由于通过硬件实现 TPM，因此它的资源有限。</span><span class="sxs-lookup"><span data-stu-id="a0411-143">Because the TPM is implemented in hardware, it has finite resources.</span></span> <span data-ttu-id="a0411-144">TCG 定义的 TPM 软件堆栈 (TSS) 使用这些资源来提供应用程序软件的受信任操作。</span><span class="sxs-lookup"><span data-stu-id="a0411-144">The TCG defines a TPM Software Stack (TSS) that makes use of these resources to provide trusted operations for application software.</span></span> <span data-ttu-id="a0411-145">但是，未预配为支持 TSS 实现可与操作系统软件（也可能正使用 TPM 资源）并行运行。</span><span class="sxs-lookup"><span data-stu-id="a0411-145">However, no provision is made for running a TSS implementation side-by-side with operating system software that may also be using TPM resources.</span></span> <span data-ttu-id="a0411-146">TBS 功能解决了此问题，方法是支持每个与 TBS 通信使用 TPM 资源的软件堆栈（可检查其他任何软件堆栈是否正在计算机上运行）。</span><span class="sxs-lookup"><span data-stu-id="a0411-146">The TBS feature solves this problem by enabling each software stack that communicates with TBS to use TPM resources checking for any other software stacks that may be running on the machine.</span></span>

## <a name="tpm-solutions-available-on-windows-iot-core"></a><span data-ttu-id="a0411-147">Windows IoT 核心版上可用的 TPM 解决方案</span><span class="sxs-lookup"><span data-stu-id="a0411-147">TPM solutions available on Windows IoT Core</span></span>  
<span data-ttu-id="a0411-148">_有关软件 TPM (sTPM)、固件 TPM (fTPM)、离散 TPM (dTPM) 的一些字词 .。。_</span><span class="sxs-lookup"><span data-stu-id="a0411-148">_A few words about Software TPM (sTPM), Firmware TPM (fTPM), Discrete TPM (dTPM)..._</span></span>

### <a name="firmware-tpm-ftpm"></a><span data-ttu-id="a0411-149">固件 TPM (fTPM)</span><span class="sxs-lookup"><span data-stu-id="a0411-149">Firmware TPM (fTPM)</span></span>  
<span data-ttu-id="a0411-150">固件 TPM (fTPM) 需要特殊处理器/SoC 支持，因此，fTPM 当前在 Raspberry Pi 2 或 3 上无法实现。</span><span class="sxs-lookup"><span data-stu-id="a0411-150">Firmware TPM (fTPM) requires special Processor/SoC support that is not currently implemented on Raspberry Pi 2 or 3.</span></span> <span data-ttu-id="a0411-151">MinnowBoard Max 需要版本 0.80 或更高版本的固件。</span><span class="sxs-lookup"><span data-stu-id="a0411-151">MinnowBoard Max needs firmware version 0.80 or higher.</span></span> <span data-ttu-id="a0411-152">默认情况下, DragonBoard410c 提供已启用的 fTPM 功能。</span><span class="sxs-lookup"><span data-stu-id="a0411-152">DragonBoard410c provides fTPM capabilities out of the box enabled by default.</span></span>  

### <a name="discrete-tpm-dtpm"></a><span data-ttu-id="a0411-153">离散 TPM (dTPM)</span><span class="sxs-lookup"><span data-stu-id="a0411-153">Discrete TPM (dTPM)</span></span>  
<span data-ttu-id="a0411-154">离散 TPM (dTPM) 被认为是最值得信赖的解决方案。</span><span class="sxs-lookup"><span data-stu-id="a0411-154">Discrete TPM (dTPM) is considered the utmost trustworthy solution by all means.</span></span>  
<span data-ttu-id="a0411-155">Windows IoT 核心版上受支持的 dTPM 芯片和 PCB 模块有多个制造商：</span><span class="sxs-lookup"><span data-stu-id="a0411-155">There are several manufacturers of dTPM chips and PCB modules that are supported on Windows IoT Core:</span></span>

> | <span data-ttu-id="a0411-156">制造商</span><span class="sxs-lookup"><span data-stu-id="a0411-156">Manufacturer</span></span> | <span data-ttu-id="a0411-157">网页</span><span class="sxs-lookup"><span data-stu-id="a0411-157">Web Page</span></span> | <span data-ttu-id="a0411-158">Modul 类型</span><span class="sxs-lookup"><span data-stu-id="a0411-158">Modul Type</span></span> | <span data-ttu-id="a0411-159">TPM 芯片</span><span class="sxs-lookup"><span data-stu-id="a0411-159">TPM Chip</span></span> |
> |-------------|----------|----------|----------| 
> | <span data-ttu-id="a0411-160">Infineon</span><span class="sxs-lookup"><span data-stu-id="a0411-160">Infineon</span></span> | [<span data-ttu-id="a0411-161">Infineon TPM</span><span class="sxs-lookup"><span data-stu-id="a0411-161">Infineon TPM</span></span>](https://www.infineon.com/cms/en/product/evaluation-boards/iridium9670-tpm2.0-linux/)| <span data-ttu-id="a0411-162">Evalboard</span><span class="sxs-lookup"><span data-stu-id="a0411-162">Evalboard</span></span> | [<span data-ttu-id="a0411-163">Infineon SLB9670 TPM 2。0</span><span class="sxs-lookup"><span data-stu-id="a0411-163">Infineon SLB9670 TPM 2.0</span></span>](https://www.infineon.com/cms/de/product/security-smart-card-solutions/optiga-embedded-security-solutions/optiga-tpm/slb-9670vq2.0/) |
> | <span data-ttu-id="a0411-164">Pi3g</span><span class="sxs-lookup"><span data-stu-id="a0411-164">Pi3g</span></span> | [<span data-ttu-id="a0411-165">Pi3g.com</span><span class="sxs-lookup"><span data-stu-id="a0411-165">Pi3g.com</span></span>](https://pi3g.com/eigene-produkte/)| <span data-ttu-id="a0411-166">批量产品 & Evalboard</span><span class="sxs-lookup"><span data-stu-id="a0411-166">Mass Product & Evalboard</span></span> | [<span data-ttu-id="a0411-167">Infineon SLB9670 TPM 2。0</span><span class="sxs-lookup"><span data-stu-id="a0411-167">Infineon SLB9670 TPM 2.0</span></span>](https://www.infineon.com/cms/de/product/security-smart-card-solutions/optiga-embedded-security-solutions/optiga-tpm/slb-9670vq2.0/) |


### <a name="software-tpm-stpm"></a><span data-ttu-id="a0411-168">软件 TPM (sTPM)</span><span class="sxs-lookup"><span data-stu-id="a0411-168">Software TPM (sTPM)</span></span>  
<span data-ttu-id="a0411-169">软件 TPM (sTPM) 也称为 TPM 模拟器。</span><span class="sxs-lookup"><span data-stu-id="a0411-169">Software TPM (sTPM) is also referred to as TPM Simulator.</span></span> <span data-ttu-id="a0411-170">它独立于平台，在 Windows IoT 核心版上受支持。</span><span class="sxs-lookup"><span data-stu-id="a0411-170">It is platform-independent, supported on Windows IoT Core.</span></span>  

> [!NOTE]
> <span data-ttu-id="a0411-171">sTPM 仅用于开发目的, 不提供任何真正的安全优势。</span><span class="sxs-lookup"><span data-stu-id="a0411-171">sTPM is intended for development purposes only and does not provide any real security benefits.</span></span>  


## <a name="samples"></a><span data-ttu-id="a0411-172">示例</span><span class="sxs-lookup"><span data-stu-id="a0411-172">Samples</span></span>  
<!--
* [TBSSample project C++](https://developer.microsoft.com/en-us/windows/iot/samples/tbssample)
  This tutorial demonstrates how to create a basic C++ application that uses TBS to poll the TPM.  -->
* <span data-ttu-id="a0411-173">[Urchin 库示例](https://github.com/ms-iot/security/tree/master/Urchin/Lib) 本教程演示如何创建一个练习使用 [Urchin 库](https://github.com/ms-iot/security)的 TPM 功能的示例 C++ 应用程序。</span><span class="sxs-lookup"><span data-stu-id="a0411-173">[Urchin Library Sample](https://github.com/ms-iot/security/tree/master/Urchin/Lib) This tutorial demonstrates how to create a sample C++ application that exercises the TPM functionality using the [Urchin library](https://github.com/ms-iot/security).</span></span> <span data-ttu-id="a0411-174">Urchin 是一个派生自 TPM 2.0 参考实现、符合规范的库。</span><span class="sxs-lookup"><span data-stu-id="a0411-174">Urchin is a spec-compliant library derived from the TPM 2.0 reference implementation.</span></span> <span data-ttu-id="a0411-175">它向客户端提供封送/取消封送所有数据结构、正确计算授权、执行参数加密和执行审核功能。</span><span class="sxs-lookup"><span data-stu-id="a0411-175">It provides to the client the functionality to marshal/unmarshal all data structures, properly calculate authorizations, perform parameter encryption and do auditing.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a0411-176">其他资源</span><span class="sxs-lookup"><span data-stu-id="a0411-176">Additional Resources</span></span>  
* [<span data-ttu-id="a0411-177">受信任的平台模块 (TPM) 规范</span><span class="sxs-lookup"><span data-stu-id="a0411-177">Trusted Platform Module (TPM) Specifications</span></span>](http://www.trustedcomputinggroup.org/developers/trusted_platform_module) 
* [<span data-ttu-id="a0411-178">TCG TPM 2.0 库规范</span><span class="sxs-lookup"><span data-stu-id="a0411-178">TCG TPM 2.0 Library Specification</span></span>](http://www.trustedcomputinggroup.org/resources/tpm_library_specification)
* <span data-ttu-id="a0411-179">[TPM 基本服务](https://msdn.microsoft.com/library/windows/desktop/aa446796(v=vs.85).aspx)</span><span class="sxs-lookup"><span data-stu-id="a0411-179">[TPM Base Services](https://msdn.microsoft.com/library/windows/desktop/aa446796(v=vs.85).aspx)</span></span> 
* [<span data-ttu-id="a0411-180">启用安全启动和 BitLocker</span><span class="sxs-lookup"><span data-stu-id="a0411-180">Enabling Secure Boot and BitLocker</span></span>](SecureBootAndBitLocker.md)

