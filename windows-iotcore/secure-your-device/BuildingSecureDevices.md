---
title: 构建更安全使用 Windows 10 IoT Core 设备
author: TorstenStein
ms.author: torstens
ms.date: 08/28/2017
ms.topic: article
description: 了解如何通过启用安全启动，实现了 Tpm，和的详细信息生成更安全的设备。
keywords: windows iot、 安全性、 固件、 安全启动，TPM，Bitlocker 加密
ms.openlocfilehash: b7340ce168f766eb13e00bfca39619e92a931c30
ms.sourcegitcommit: 2e7e9555fe71ca60b5f41dbf06051a50520a368a
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/04/2019
ms.locfileid: "66491716"
---
# <a name="building-more-secure-devices-with-windows-10-iot-core"></a><span data-ttu-id="aaabf-104">构建更安全使用 Windows 10 IoT Core 设备</span><span class="sxs-lookup"><span data-stu-id="aaabf-104">Building more secure devices with Windows 10 IoT Core</span></span>

## <a name="introduction"></a><span data-ttu-id="aaabf-105">简介</span><span class="sxs-lookup"><span data-stu-id="aaabf-105">Introduction</span></span>  

<span data-ttu-id="aaabf-106">Windows 10 IoT 核心版提供了强，企业级安全功能，可以利用这些较小的、 资源约束类 IoT 设备上。</span><span class="sxs-lookup"><span data-stu-id="aaabf-106">Windows 10 IoT Core provides strong, enterprise-grade security features that can be leveraged on smaller, resource-constrained classes of IoT devices.</span></span> <span data-ttu-id="aaabf-107">若要提供切实的益处这些安全功能，硬件平台还必须提供一种方法，若要定位到它们。</span><span class="sxs-lookup"><span data-stu-id="aaabf-107">For these security features to offer tangible benefits, the hardware platform must also provide a means to anchor them.</span></span> <span data-ttu-id="aaabf-108">本文提供了概括性指导，到 OEM 设备构建者和安全意识的创建者想要选择适当的硬件以及生成、 配置和交付更安全的 IoT 设备向其客户。</span><span class="sxs-lookup"><span data-stu-id="aaabf-108">This article provides high-level guidance to OEM device builders and security conscious makers who want to select appropriate hardware and build, configure, and ship a more secure IoT device to their customers.</span></span>
<span data-ttu-id="aaabf-109">![数据安全性](../media/SecurityFlowAndCertificates/DataRestExecutionMotion.png)</span><span class="sxs-lookup"><span data-stu-id="aaabf-109">![Data Security](../media/SecurityFlowAndCertificates/DataRestExecutionMotion.png)</span></span>

## <a name="building-a-more-secure-iot-device"></a><span data-ttu-id="aaabf-110">构建更安全的 IoT 设备</span><span class="sxs-lookup"><span data-stu-id="aaabf-110">Building a more secure IoT device</span></span>  
<span data-ttu-id="aaabf-111">使用 IoT Core 构建更安全 IoT 设备的过程包括选择的硬件以支持平台的安全功能，以及已启用安全性的 IoT 设备的生产。</span><span class="sxs-lookup"><span data-stu-id="aaabf-111">The process for building more secure IoT devices with IoT Core includes the selection of hardware to support platform security features, as well as the production of security-enabled IoT devices.</span></span>

![设备生成过程](../media/SecurityFlowAndCertificates/DeviceBuildProcess.png)


## <a name="choosing-security-enabled-hardware"></a><span data-ttu-id="aaabf-113">选择已启用安全性的硬件</span><span class="sxs-lookup"><span data-stu-id="aaabf-113">Choosing security-enabled hardware</span></span>
<span data-ttu-id="aaabf-114">虽然 IoT 核心安全功能内置到平台以保护客户数据，它依赖于硬件的安全功能，以充分利用这些功能。</span><span class="sxs-lookup"><span data-stu-id="aaabf-114">While IoT Core has security capabilities built in to the platform to protect customer data, it relies on hardware security features to fully utilize these capabilities.</span></span> <span data-ttu-id="aaabf-115">实际上，软件无法保护本身可以操作内存，因此不存在信任锚点或可以通过单独的软件提供的不可变的设备标识。</span><span class="sxs-lookup"><span data-stu-id="aaabf-115">In fact, software cannot protect itself because memory can be manipulated, and there is no trust anchor or immutable device identity that can be provided through software alone.</span></span> <span data-ttu-id="aaabf-116">有几种方法来提供基于硬件的安全，如智能卡、 受信任的平台模块 (Tpm) 或 SoC.中内置的安全功能</span><span class="sxs-lookup"><span data-stu-id="aaabf-116">There are several ways to provide hardware-based security, such as smart cards, trusted platform module (TPMs), or security features built into the SoC.</span></span> 

<span data-ttu-id="aaabf-117">有关支持的硬件平台的详细信息，请参阅[Soc 和自定义看板](https://docs.microsoft.com/en-us/windows/iot-core/learn-about-hardware/socsandcustomboards)。</span><span class="sxs-lookup"><span data-stu-id="aaabf-117">For more information about supported hardware platforms, see [SoCs and custom boards](https://docs.microsoft.com/en-us/windows/iot-core/learn-about-hardware/socsandcustomboards).</span></span> 

### <a name="trusted-platform-module"></a><span data-ttu-id="aaabf-118">受信任的平台模块</span><span class="sxs-lookup"><span data-stu-id="aaabf-118">Trusted Platform Module</span></span>
<span data-ttu-id="aaabf-119">IoT 核心版使用受信任的平台模块 2.0 (TPM 2.0) 作为硬件的安全平台。</span><span class="sxs-lookup"><span data-stu-id="aaabf-119">IoT Core uses Trusted Platform Module 2.0 (TPM 2.0) as hardware security platform.</span></span> <span data-ttu-id="aaabf-120">我们建议 Oem 使用提供 TPM 2.0 能够充分利用 IoT 核心安全功能，如 BitLocker、 安全启动、 Azure 凭据存储，以及其他的硬件平台。</span><span class="sxs-lookup"><span data-stu-id="aaabf-120">We recommended that OEMs use a hardware platform that provides TPM 2.0 to fully leverage the IoT Core security features, such as BitLocker, Secure Boot, Azure credential storage, and others.</span></span> <span data-ttu-id="aaabf-121">有两个选项适用于生产设备来实现 TPM： 作为离散 TPM (dTPM) 或固件 TPM (fTPM)。</span><span class="sxs-lookup"><span data-stu-id="aaabf-121">There are two options for production devices to implement a TPM: as discreet TPM (dTPM) or as firmware TPM (fTPM).</span></span> <span data-ttu-id="aaabf-122">可从多个制造商，如 Infineon、 NazionZ，及其他离散 Tpm。</span><span class="sxs-lookup"><span data-stu-id="aaabf-122">Discrete TPMs are available from several manufacturers, such as Infineon, NazionZ, and others.</span></span> <span data-ttu-id="aaabf-123">某些 SoC 制造商提供 fTPM 实现看板支持包 (BSP) 的一部分。</span><span class="sxs-lookup"><span data-stu-id="aaabf-123">Some SoC manufacturers provide fTPM implementations as part of a board support package (BSP).</span></span> 

<span data-ttu-id="aaabf-124">有关 Tpm 的详细信息，请参阅[TPM 概述](https://docs.microsoft.com/en-us/windows/iot-core/secure-your-device/tpm)并[如何设置 TPM](https://docs.microsoft.com/en-us/windows/iot-core/secure-your-device/setuptpm)。</span><span class="sxs-lookup"><span data-stu-id="aaabf-124">For more information about TPMs, see [TPM Overview](https://docs.microsoft.com/en-us/windows/iot-core/secure-your-device/tpm) and [How to setup a TPM](https://docs.microsoft.com/en-us/windows/iot-core/secure-your-device/setuptpm).</span></span>

### <a name="storage-options"></a><span data-ttu-id="aaabf-125">存储选项</span><span class="sxs-lookup"><span data-stu-id="aaabf-125">Storage options</span></span>
<span data-ttu-id="aaabf-126">开发板，如常用的 Raspberry Pi 3，提供的灵活性，并允许开发人员能够轻松地启动任何平台通过可移动的 SD 卡。</span><span class="sxs-lookup"><span data-stu-id="aaabf-126">Development boards, like the popular Raspberry Pi 3, offer flexibility and allow developers to easily boot any platform via a removable SD card.</span></span> <span data-ttu-id="aaabf-127">适用于大多数行业 IoT 设备，这种灵活性是不可取的并可以使攻击容易实现的目标设备。</span><span class="sxs-lookup"><span data-stu-id="aaabf-127">For most industry IoT devices, this flexibility is not desirable and can make devices an easy target for attacks.</span></span> <span data-ttu-id="aaabf-128">相反，在设计时您的硬件，请考虑对较小的、 低成本 IoT 设备使用 eMMC 存储。</span><span class="sxs-lookup"><span data-stu-id="aaabf-128">Instead, when designing your hardware, consider using an eMMC storage for your smaller, low-cost IoT devices.</span></span> <span data-ttu-id="aaabf-129">嵌入的存储可以大大增强其难度单独从设备的内容，并进而，降低数据被盗的可能性或引入到设备上的恶意软件。</span><span class="sxs-lookup"><span data-stu-id="aaabf-129">Embedded storage makes it significantly more difficult to separate the content from the device and, in turn, reduces the potential of data theft or the introduction of malware onto the device.</span></span>

## <a name="create-a-retail-image"></a><span data-ttu-id="aaabf-130">创建零售映像</span><span class="sxs-lookup"><span data-stu-id="aaabf-130">Create a retail image</span></span> 
<span data-ttu-id="aaabf-131">当[创建 Windows IoT Core 零售映像](https://docs.microsoft.com/windows-hardware/manufacture/iot/iot-core-manufacturing-guide)，确保没有开发人员工具，允许远程访问并且调试在生产系统上存在，将根据这些潜在可打开你的设备受到攻击。</span><span class="sxs-lookup"><span data-stu-id="aaabf-131">When [Creating a Windows IoT Core retail image](https://docs.microsoft.com/windows-hardware/manufacture/iot/iot-core-manufacturing-guide), ensure that no developer tools that allow remote access and debug are present on production systems as these can potentially open your device to attacks.</span></span> <span data-ttu-id="aaabf-132">如果使用像这样的开发人员工具[Windows Device Portal](https://docs.microsoft.com/en-us/windows/iot-core/manage-your-device/remotedisplay)， [FTP 服务器](https://docs.microsoft.com/en-us/windows/iot-core/connect-your-device/ftp)， [SSH](https://docs.microsoft.com/en-us/windows/iot-core/connect-your-device/ssh)，或者[PowerShell](https://docs.microsoft.com/en-us/windows/iot-core/connect-your-device/powershell)在映像中开发，请确保你测试和验证的零售映像 IoT Core 上您不包括这些工具的方案。</span><span class="sxs-lookup"><span data-stu-id="aaabf-132">If you're using developer tools like [Windows Device Portal](https://docs.microsoft.com/en-us/windows/iot-core/manage-your-device/remotedisplay), [FTP Server](https://docs.microsoft.com/en-us/windows/iot-core/connect-your-device/ftp), [SSH](https://docs.microsoft.com/en-us/windows/iot-core/connect-your-device/ssh), or [PowerShell](https://docs.microsoft.com/en-us/windows/iot-core/connect-your-device/powershell) in your images during development, make sure that you test and validate your scenarios on retail IoT Core images that do not include these tools.</span></span>

### <a name="user-accounts"></a><span data-ttu-id="aaabf-133">用户帐户</span><span class="sxs-lookup"><span data-stu-id="aaabf-133">User accounts</span></span>
<span data-ttu-id="aaabf-134">大多数用户都熟悉利用这一概念*所有权*的电脑和手机之类的设备： 了解和设置凭据，才能访问设备的个性化设置设备时已取消装箱。</span><span class="sxs-lookup"><span data-stu-id="aaabf-134">Most users are familiar with the notion of taking *ownership* of devices like PCs and phones: the idea of personalizing a device when it's unboxed and of setting up credentials to access the device.</span></span> <span data-ttu-id="aaabf-135">与不同的使用者电脑和手机，IoT 设备不应作为常规用途计算设备。</span><span class="sxs-lookup"><span data-stu-id="aaabf-135">Unlike consumer PCs and phones, IoT devices are not intended to serve as general purpose computing devices.</span></span> <span data-ttu-id="aaabf-136">相反，它们是通常的单应用、 固定用途设备。</span><span class="sxs-lookup"><span data-stu-id="aaabf-136">Instead, they are usually single-app, fixed purpose devices.</span></span> <span data-ttu-id="aaabf-137">尽管 Windows 支持可以远程连接到设备在开发周期内的设备管理员的概念，工业 IoT 设备上的此类支持可能会带来威胁，尤其是在使用弱密码。</span><span class="sxs-lookup"><span data-stu-id="aaabf-137">Though Windows supports the notion of device administrators that can remotely connect to devices during a development cycle, such support on industry IoT devices can pose a threat, especially when weak passwords are used.</span></span> <span data-ttu-id="aaabf-138">一般情况下，我们建议在 IoT Core 设备上创建任何默认帐户或密码。</span><span class="sxs-lookup"><span data-stu-id="aaabf-138">In general, we recommend that no default accounts or passwords be created on IoT Core devices.</span></span>

## <a name="lockdown-a-retail-image"></a><span data-ttu-id="aaabf-139">锁定零售映像</span><span class="sxs-lookup"><span data-stu-id="aaabf-139">Lockdown a retail image</span></span>
<span data-ttu-id="aaabf-140">在常规用途计算设备，如 Pc，用户可以安装应用程序，并更改设置，包括安全功能，以确保设备最适合其需求。</span><span class="sxs-lookup"><span data-stu-id="aaabf-140">On general purpose computing devices, such as PCs, users can install applications and change settings, including for security features, to ensure the device best suits their needs.</span></span> <span data-ttu-id="aaabf-141">IoT 设备的大多数都是固定的函数-的设备将设备生存期内更改它们的用途。</span><span class="sxs-lookup"><span data-stu-id="aaabf-141">The majority of the IoT devices are fixed-function-devices that will not change their purpose over the device lifetime.</span></span> <span data-ttu-id="aaabf-142">它们接收软件更新，或启用其操作的边界，如改进的 UI 或温度条例上智能调温器内的功能更新。</span><span class="sxs-lookup"><span data-stu-id="aaabf-142">They receive software updates or enable functional updates within their operational boundaries, such as an improved UI or temperature regulation on a smart thermostat.</span></span> <span data-ttu-id="aaabf-143">此信息可以用于完全锁定 IoT 设备通过仅允许已知且受信任代码的执行。</span><span class="sxs-lookup"><span data-stu-id="aaabf-143">This information can be used to fully lockdown an IoT device by only allowing execution of known and trusted code.</span></span> <span data-ttu-id="aaabf-144">在 Windows 10 IoT Core 上的设备保护可帮助保护 IoT 设备通过确保未知或不受信任的可执行代码，不能锁定的设备上运行。</span><span class="sxs-lookup"><span data-stu-id="aaabf-144">Device Guard on Windows 10 IoT Core can help protect IoT devices by ensuring that unknown or untrusted executable code cannot be run on locked-down devices.</span></span>

<span data-ttu-id="aaabf-145">Microsoft 将提供[统包安全包](https://github.com/ms-iot/security/tree/master/TurnkeySecurity)以便启用 IoT Core 设备上的主要安全功能。</span><span class="sxs-lookup"><span data-stu-id="aaabf-145">Microsoft is providing the [Turnkey Security Package](https://github.com/ms-iot/security/tree/master/TurnkeySecurity) to facilitate the enablement of key security features on IoT Core devices.</span></span> <span data-ttu-id="aaabf-146">这样，创建完全锁定 IoT 设备的设备构建者。</span><span class="sxs-lookup"><span data-stu-id="aaabf-146">This lets device builders create fully locked down IoT devices.</span></span> <span data-ttu-id="aaabf-147">包将帮助了解：</span><span class="sxs-lookup"><span data-stu-id="aaabf-147">The package will help with:</span></span>

* <span data-ttu-id="aaabf-148">预配安全启动密钥和上启用该功能支持的 IoT 平台。</span><span class="sxs-lookup"><span data-stu-id="aaabf-148">Provisioning Secure Boot keys and enabling the feature on supported IoT platforms.</span></span>
* <span data-ttu-id="aaabf-149">安装程序并使用 BitLocker 设备加密配置。</span><span class="sxs-lookup"><span data-stu-id="aaabf-149">Setup and configuration of device encryption using BitLocker.</span></span> 
* <span data-ttu-id="aaabf-150">启动设备锁定为只允许已签名的应用程序和驱动程序的执行。</span><span class="sxs-lookup"><span data-stu-id="aaabf-150">Initiating device lockdown to only allow execution of signed applications and drivers.</span></span>

<span data-ttu-id="aaabf-151">分步指南中所述[启用安全引导、 BitLocker、 和 Device Guard](https://docs.microsoft.com/en-us/windows/iot-core/secure-your-device/securebootandbitlocker)部分。</span><span class="sxs-lookup"><span data-stu-id="aaabf-151">Step-by-step guidance is described in the [Enabling Secure Boot, BitLocker, and Device Guard](https://docs.microsoft.com/en-us/windows/iot-core/secure-your-device/securebootandbitlocker) section.</span></span>

## <a name="device-production"></a><span data-ttu-id="aaabf-152">设备生产</span><span class="sxs-lookup"><span data-stu-id="aaabf-152">Device production</span></span>
<span data-ttu-id="aaabf-153">锁定映像验证后，它可以用于生产。</span><span class="sxs-lookup"><span data-stu-id="aaabf-153">Once the lockdown image is validated, it can be used for manufacturing.</span></span> <span data-ttu-id="aaabf-154">有关详细信息请参阅[生产的 IoT Core](https://docs.microsoft.com/en-us/windows-hardware/manufacture/iot/)。</span><span class="sxs-lookup"><span data-stu-id="aaabf-154">For more information see [IoT Core manufacturing](https://docs.microsoft.com/en-us/windows-hardware/manufacture/iot/).</span></span>
