---
title: 构建安全使用 Windows 10 IoT Core 设备
author: saraclay
ms.author: saclayt
ms.date: 08/28/2017
ms.topic: article
description: 了解如何构建安全的设备通过启用安全启动，实现了 Tpm，和的详细信息。
keywords: windows iot、 安全性、 固件、 安全启动，TPM，Bitlocker 加密
ms.openlocfilehash: e9d9bc476455bfbd653a7923c729880dbfad0891
ms.sourcegitcommit: ef85ccba54b1118d49554e88768240020ff514b0
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/11/2019
ms.locfileid: "59511037"
---
# <a name="building-secure-devices-with-windows-10-iot-core"></a>构建安全使用 Windows 10 IoT Core 设备

## <a name="introduction"></a>简介  
随着 Windows 10 IoT 核心版推出，Microsoft 将强企业级安全功能，可以利用这些较小，资源受限类的 IoT 设备上。  这些安全功能，提供切实的益处，硬件平台还必须提供一种方法，若要定位到它们。 本文档提供了概括性指导 OEM 设备构建者和安全意识制造商想要选择适当的硬件和生成、 配置和安全 IoT 设备寄给他们的客户。 

## <a name="firmware"></a>固件  
在常规用途计算了"打开"状态如 Pc 的设备，用户可以通过各种键组合 （例如 F2 进入 UEFI 设置大多数 pc 立即） 的设备启动期间访问固件设置。 这可以允许用户在该平台启动，以及启用和禁用各种设备端口、 函数和其他潜在的安全功能，可在设备上进行更改。  

给定此类修改的敏感性质，IoT 设备应不起作用"打开设备，"等更像"锁定"设备，类似于移动电话，其中对固件通常不允许访问工作。  这通常可以通过确保在你的生产设备中使用锁定的固件来完成。 锁定的固件应可通过固件提供程序。  锁定的固件不可用或可能不合适，如创建者，供使用的位置的设备上至少应考虑保护通过管理员强密码的固件设置访问权限。

## <a name="enabling-secure-boot"></a>启用安全启动
Windows 10 IoT 核心版将在实现统一可扩展固件接口 (UEFI) 的设备上启动。  标准 UEFI 实现称为安全启动一项安全功能。 这允许为仅限制为只允许执行指定的颁发机构签名的二进制文件在系统启动受信任的软件的设备。  当设备启动后，UEFI 安全引导将检查引导软件，包括固件驱动程序和操作系统每段的签名。  如果签名不匹配 (例如如果攻击者使用受攻击的 OS 替换原始图像) 平台将不会启动。 如果签名验证，很好，设备将继续启动，然后为控件提供了对操作系统。  请注意，虽然与一组定义发布颁发机构的限制不包括所有未知的代码，它不一定会防止已知错误的代码执行 （例如回滚攻击）。  强烈建议启用安全启动，如果您的固件支持它。 

设备制造商需要存储到其设备上的安全启动数据库。  这包括签名数据库 (db)、 已撤消的签名数据库 (dbx) 和数据库密钥注册密钥 (KEK)。  这些数据库通常在制造时存储在固件非易失内存 （非易失内存）。 签名数据库 (db) 和已撤消的签名数据库 (dbx) 列表签名者或图像哈希的 UEFI 应用程序、 操作系统加载程序 （如 Microsoft 操作系统加载程序或启动管理器），并可以在设备加载的 UEFI 驱动程序以及为不再受信任和可能不会加载的项的已吊销映像。 密钥注册密钥数据库 (KEK) 是一个单独的数据库的签名密钥可用于更新签名数据库和已撤消的签名数据库。 Microsoft 要求使用指定的项，以便 Microsoft 可以将新的操作系统添加到签名数据库或将已知错误图像添加到吊销的签名数据库将来要包含在 KEK 数据库中。

已添加这些数据库后，并最终固件验证和测试后，固件已锁定编辑，可以生成并添加平台键 (PK)。 PK 随后可用于登录到 KEK 的更新或对安全的变量进行任何所需的更改。 

设备构建者应联系其固件制造商，了解工具和创建这些数据库的帮助。 请访问此[TechNet 文章](https://technet.microsoft.com/library/dn747883.aspx)详细了解安全启动密钥的创建和管理。

## <a name="implementing-tpms"></a>实现 Tpm  
受信任的平台模块 (TPM) 是加密协处理器，其中包含随机数生成、加密密钥的安全生成以及它们的使用限制的功能。 它还包括诸如远程证明和密封存储等功能。 TPM 的技术规格是公开和调用受信任计算组 (TCG) 的标准正文由驱动。  TPM 2.0 是可作为离散组件 （来自各个制造商） 以及在某些 Soc，在固件中实现。

合并了 TPM 的设备可以创建加密密钥并加密，以便只能由 TPM 进行解密。 此过程中，通常称为"包装"绑定"密钥，可以帮助避免泄露的密钥。 每个 TPM 有一个主"覆盖"密钥，名为存储根密钥 (SRK)，它存储在 TPM 的内部。 TPM 中创建的密钥的私钥部分永远不会公开给任何其他组件、软件、进程或用户。 此外，合并了 TPM 的设备还可以创建一个键，它不仅被覆盖，而且还被连接到特定平台度量。 仅当这些平台测量具有的值与创建该密钥时所具有的值相同时，才可以解封此类型的密钥。 此过程称为"密封"到 TPM 的密钥时解密该密钥名为"解封"。 TPM 还可以对 TPM 外部生成的数据进行封装和解封。 使用此封装的密钥和软件（例如 BitLocker 驱动器加密），可以锁定数据，直到符合特定的硬件或软件条件为止。 

借助 TPM，可保持密钥对的私钥部分独立于操作系统控制的内存。 可以将密钥密封到 TPM 中，并可以进行某些保证系统 （定义系统的"可信赖"的保证） 的状态，才能解封和释放使用的密钥。 由于 TPM 使用自己的内部固件和逻辑电路来处理指令，因此它不依赖于操作系统，并且它不会公开给操作系统或应用程序软件中可能存在的安全漏洞。

> [!NOTE] 
> 尽管某些设备可能会合并较旧的 TPM 1.2 芯片，Windows 10 IoT 核心版仅支持 TPM 2.0。

## <a name="enabling-bitlocker-encryption"></a>启用 BitLocker 加密  
为了保护数据的其余部分 （即存储在设备上的日期），Microsoft 为 Windows 10 IoT 核心版中的 IoT 设备引入其企业级 BitLocker 驱动器加密技术。  BitLocker 可确保在设备上存储的数据仍然保持加密，即使设备未运行操作系统时被篡改。  这有助于防范"脱机攻击"，所做的禁用或绕过已的安装的操作系统，或通过从设备在物理上分隔的存储媒体，以便单独攻击数据所做的攻击。 

BitLocker 使用受信任的平台模块 (TPM) 来提供增强的保护，为你的数据，并确保早期启动组件的完整性。 这有助于防止数据被盗或未经授权的查看通过加密整个 Windows 卷和任何可能会出现在设备上的数据分区。

有关如何启用 Windows 10 IoT Core 上的 BitLocker 的其他说明，请遵循所述的步骤[此处](../secure-your-device/SecureBootandBitLocker.md)。

## <a name="onboard-storage-options"></a>载入存储选项
开发板，如常用的 Raspberry Pi 3，提供的灵活性，并允许开发人员能够轻松地启动任何平台通过可移动的 SD 卡。  适用于大多数行业 IoT 设备，这种灵活性是不可取的并可以使此类设备的攻击容易实现的目标。 相反，在设计时您的硬件，请考虑对较小的、 低成本 IoT 设备使用 eMMC 存储。  嵌入的存储可以大大增强其难度单独从设备的内容并反过来，降低了引入恶意软件到设备或数据被盗的可能性。 

## <a name="developer-tools"></a>开发人员工具  
构建 Windows 10 IoT 核心版映像最终传送设备时使用 ICD （映像配置设计器），确保没有开发人员工具包括在零售映像。  这些可能可以打开您的设备与攻击工具，开发人员可以远程访问和调试 IoT Core 设备不应在生产系统上存在。  请确保我们的开发人员工具等 Windows Device Portal，ftp 服务器、 SSH 或 PowerShell 中使用你的映像在开发期间，如果你测试和验证的零售映像 IoT Core 上您不包括这些工具的方案。

## <a name="user-accounts"></a>用户帐户  
大多数用户都熟悉这一概念时取消装箱并设置凭据来访问设备执行"所有权"的电脑和手机的想法之类的设备的个性化设置设备。 与不同的使用者电脑和手机，IoT 设备不应作为常规用途计算设备。 相反，它们是通常的单应用、 固定用途设备。 尽管 Windows 支持可以远程连接到设备在开发周期内的设备管理员的概念，工业 IoT 设备上的此类支持可能会带来威胁，尤其是在使用弱密码。  一般情况下，Microsoft 建议，应在 Windows 10 IoT Core 设备上创建没有"default"帐户或密码。


