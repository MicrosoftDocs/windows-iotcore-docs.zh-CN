---
title: 通过 Windows 10 IoT Core 构建更安全的设备
author: TorstenStein
ms.author: torstens
ms.date: 08/28/2017
ms.topic: article
description: 了解如何通过启用安全启动、实现 Tpm 等来构建更安全的设备。
keywords: windows iot，安全性，固件，安全启动，TPM，Bitlocker，加密
ms.openlocfilehash: f7d075e026c1ef1936ebe1eef9f2aa5bad2787fc
ms.sourcegitcommit: 2d04dae9cb26f9aa6e1da2056be5d04dcfab317d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/18/2020
ms.locfileid: "90782769"
---
# <a name="building-more-secure-devices-with-windows-10-iot-core"></a><span data-ttu-id="4730a-104">通过 Windows 10 IoT Core 构建更安全的设备</span><span class="sxs-lookup"><span data-stu-id="4730a-104">Building more secure devices with Windows 10 IoT Core</span></span>

## <a name="introduction"></a><span data-ttu-id="4730a-105">介绍</span><span class="sxs-lookup"><span data-stu-id="4730a-105">Introduction</span></span>  

<span data-ttu-id="4730a-106">Windows 10 IoT Core 提供了强大的企业级安全功能，可用于较小的、资源受限的 IoT 设备类别。</span><span class="sxs-lookup"><span data-stu-id="4730a-106">Windows 10 IoT Core provides strong, enterprise-grade security features that can be leveraged on smaller, resource-constrained classes of IoT devices.</span></span> <span data-ttu-id="4730a-107">为了使这些安全功能提供实实在在的优势，硬件平台还必须提供一种方法来定位它们。</span><span class="sxs-lookup"><span data-stu-id="4730a-107">For these security features to offer tangible benefits, the hardware platform must also provide a means to anchor them.</span></span> <span data-ttu-id="4730a-108">本文提供了 OEM 设备构建者和安全意识制造商的高级指导，他们希望选择适当的硬件并构建、配置更安全的 IoT 设备并将其交付给客户。</span><span class="sxs-lookup"><span data-stu-id="4730a-108">This article provides high-level guidance to OEM device builders and security conscious makers who want to select appropriate hardware and build, configure, and ship a more secure IoT device to their customers.</span></span>
<span data-ttu-id="4730a-109">![数据安全性](../media/SecurityFlowAndCertificates/DataRestExecutionMotion.png)</span><span class="sxs-lookup"><span data-stu-id="4730a-109">![Data Security](../media/SecurityFlowAndCertificates/DataRestExecutionMotion.png)</span></span>

## <a name="building-a-more-secure-iot-device"></a><span data-ttu-id="4730a-110">构建更安全的 IoT 设备</span><span class="sxs-lookup"><span data-stu-id="4730a-110">Building a more secure IoT device</span></span>  
<span data-ttu-id="4730a-111">用 IoT Core 构建更安全的 IoT 设备的过程包括选择支持平台安全功能的硬件，以及生产启用安全功能的 IoT 设备。</span><span class="sxs-lookup"><span data-stu-id="4730a-111">The process for building more secure IoT devices with IoT Core includes the selection of hardware to support platform security features, as well as the production of security-enabled IoT devices.</span></span>

![设备生成过程](../media/SecurityFlowAndCertificates/DeviceBuildProcess.png)


## <a name="choosing-security-enabled-hardware"></a><span data-ttu-id="4730a-113">选择启用安全的硬件</span><span class="sxs-lookup"><span data-stu-id="4730a-113">Choosing security-enabled hardware</span></span>
<span data-ttu-id="4730a-114">尽管 IoT 核心在平台中内置了用于保护客户数据的安全功能，但它依赖于硬件安全功能来完全利用这些功能。</span><span class="sxs-lookup"><span data-stu-id="4730a-114">While IoT Core has security capabilities built in to the platform to protect customer data, it relies on hardware security features to fully utilize these capabilities.</span></span> <span data-ttu-id="4730a-115">事实上，软件无法自行保护，因为可以对内存进行操作，并且没有可通过软件单独提供的信任密钥或不可变设备标识。</span><span class="sxs-lookup"><span data-stu-id="4730a-115">In fact, software cannot protect itself because memory can be manipulated, and there is no trust anchor or immutable device identity that can be provided through software alone.</span></span> <span data-ttu-id="4730a-116">有多种方法可提供基于硬件的安全性，例如智能卡、受信任的平台模块 (Tpm) ，或在 SoC 中内置的安全功能。</span><span class="sxs-lookup"><span data-stu-id="4730a-116">There are several ways to provide hardware-based security, such as smart cards, trusted platform module (TPMs), or security features built into the SoC.</span></span> 

<span data-ttu-id="4730a-117">有关支持的硬件平台的详细信息，请参阅 [soc 和自定义板](https://docs.microsoft.com/windows/iot-core/learn-about-hardware/socsandcustomboards)。</span><span class="sxs-lookup"><span data-stu-id="4730a-117">For more information about supported hardware platforms, see [SoCs and custom boards](https://docs.microsoft.com/windows/iot-core/learn-about-hardware/socsandcustomboards).</span></span> 

### <a name="trusted-platform-module"></a><span data-ttu-id="4730a-118">受信任的平台模块</span><span class="sxs-lookup"><span data-stu-id="4730a-118">Trusted Platform Module</span></span>
<span data-ttu-id="4730a-119">IoT 核心使用受信任的平台模块 2.0 (TPM 2.0) 为硬件安全平台。</span><span class="sxs-lookup"><span data-stu-id="4730a-119">IoT Core uses Trusted Platform Module 2.0 (TPM 2.0) as hardware security platform.</span></span> <span data-ttu-id="4730a-120">建议 Oem 使用提供 TPM 2.0 的硬件平台，以充分利用 IoT 核心安全功能，例如 BitLocker、安全启动、Azure 凭据存储等。</span><span class="sxs-lookup"><span data-stu-id="4730a-120">We recommended that OEMs use a hardware platform that provides TPM 2.0 to fully leverage the IoT Core security features, such as BitLocker, Secure Boot, Azure credential storage, and others.</span></span> <span data-ttu-id="4730a-121">生产设备有两个选项可用于实现 TPM：作为合理的 TPM (dTPM) 或固件 TPM (fTPM) 。</span><span class="sxs-lookup"><span data-stu-id="4730a-121">There are two options for production devices to implement a TPM: as discreet TPM (dTPM) or as firmware TPM (fTPM).</span></span> <span data-ttu-id="4730a-122">若干制造商（如 Infineon、NazionZ 等）提供了离散 Tpm。</span><span class="sxs-lookup"><span data-stu-id="4730a-122">Discrete TPMs are available from several manufacturers, such as Infineon, NazionZ, and others.</span></span> <span data-ttu-id="4730a-123">某些 SoC 制造商将 fTPM 实现作为板支持包的一部分提供 (BSP) 。</span><span class="sxs-lookup"><span data-stu-id="4730a-123">Some SoC manufacturers provide fTPM implementations as part of a board support package (BSP).</span></span> 

<span data-ttu-id="4730a-124">有关 Tpm 的详细信息，请参阅 [Tpm 概述](https://docs.microsoft.com/windows/iot-core/secure-your-device/tpm) 和 [如何设置 tpm](https://docs.microsoft.com/windows/iot-core/secure-your-device/setuptpm)。</span><span class="sxs-lookup"><span data-stu-id="4730a-124">For more information about TPMs, see [TPM Overview](https://docs.microsoft.com/windows/iot-core/secure-your-device/tpm) and [How to setup a TPM](https://docs.microsoft.com/windows/iot-core/secure-your-device/setuptpm).</span></span>

### <a name="storage-options"></a><span data-ttu-id="4730a-125">存储选项</span><span class="sxs-lookup"><span data-stu-id="4730a-125">Storage options</span></span>
<span data-ttu-id="4730a-126">与流行的 Raspberry Pi 3 一样，开发板可提供灵活性，并使开发人员能够通过可移动 SD 卡轻松启动任何平台。</span><span class="sxs-lookup"><span data-stu-id="4730a-126">Development boards, like the popular Raspberry Pi 3, offer flexibility and allow developers to easily boot any platform via a removable SD card.</span></span> <span data-ttu-id="4730a-127">对于大多数业界 IoT 设备，这种灵活性并不理想，可使设备成为攻击的目标。</span><span class="sxs-lookup"><span data-stu-id="4730a-127">For most industry IoT devices, this flexibility is not desirable and can make devices an easy target for attacks.</span></span> <span data-ttu-id="4730a-128">相反，在设计硬件时，请考虑对小型、低成本的 IoT 设备使用 eMMC 存储。</span><span class="sxs-lookup"><span data-stu-id="4730a-128">Instead, when designing your hardware, consider using an eMMC storage for your smaller, low-cost IoT devices.</span></span> <span data-ttu-id="4730a-129">利用嵌入的存储空间，可以很难将内容从设备中分离出来，进而降低数据被盗的可能性或引入到设备上的恶意软件。</span><span class="sxs-lookup"><span data-stu-id="4730a-129">Embedded storage makes it significantly more difficult to separate the content from the device and, in turn, reduces the potential of data theft or the introduction of malware onto the device.</span></span>

## <a name="create-a-retail-image"></a><span data-ttu-id="4730a-130">创建零售映像</span><span class="sxs-lookup"><span data-stu-id="4730a-130">Create a retail image</span></span> 
<span data-ttu-id="4730a-131">[创建 Windows IoT Core 零售映像](https://docs.microsoft.com/windows-hardware/manufacture/iot/iot-core-manufacturing-guide)时，请确保生产系统中不存在允许远程访问和调试的开发人员工具，因为这可能会使你的设备遭受攻击。</span><span class="sxs-lookup"><span data-stu-id="4730a-131">When [Creating a Windows IoT Core retail image](https://docs.microsoft.com/windows-hardware/manufacture/iot/iot-core-manufacturing-guide), ensure that no developer tools that allow remote access and debug are present on production systems as these can potentially open your device to attacks.</span></span> <span data-ttu-id="4730a-132">如果在开发过程中使用 [Windows 设备门户](https://docs.microsoft.com/windows/iot-core/manage-your-device/remotedisplay)、 [FTP 服务器](https://docs.microsoft.com/windows/iot-core/connect-your-device/ftp)、 [SSH](https://docs.microsoft.com/windows/iot-core/connect-your-device/ssh)或 [PowerShell](https://docs.microsoft.com/windows/iot-core/connect-your-device/powershell) 等开发人员工具，请确保在不包含这些工具的情况下，在零售 IoT 核心映像上测试和验证方案。</span><span class="sxs-lookup"><span data-stu-id="4730a-132">If you're using developer tools like [Windows Device Portal](https://docs.microsoft.com/windows/iot-core/manage-your-device/remotedisplay), [FTP Server](https://docs.microsoft.com/windows/iot-core/connect-your-device/ftp), [SSH](https://docs.microsoft.com/windows/iot-core/connect-your-device/ssh), or [PowerShell](https://docs.microsoft.com/windows/iot-core/connect-your-device/powershell) in your images during development, make sure that you test and validate your scenarios on retail IoT Core images that do not include these tools.</span></span>

### <a name="user-accounts"></a><span data-ttu-id="4730a-133">用户帐户</span><span class="sxs-lookup"><span data-stu-id="4730a-133">User accounts</span></span>
<span data-ttu-id="4730a-134">大多数用户都熟悉了获取设备（如电脑和手机）的 *所有权* 的概念：对设备进行取消装箱和设置凭据以访问设备时，对其进行个性化的理念。</span><span class="sxs-lookup"><span data-stu-id="4730a-134">Most users are familiar with the notion of taking *ownership* of devices like PCs and phones: the idea of personalizing a device when it's unboxed and of setting up credentials to access the device.</span></span> <span data-ttu-id="4730a-135">不同于消费者电脑和手机，IoT 设备并不旨在用作常规用途计算设备。</span><span class="sxs-lookup"><span data-stu-id="4730a-135">Unlike consumer PCs and phones, IoT devices are not intended to serve as general purpose computing devices.</span></span> <span data-ttu-id="4730a-136">相反，它们通常是单应用、固定用途设备。</span><span class="sxs-lookup"><span data-stu-id="4730a-136">Instead, they are usually single-app, fixed purpose devices.</span></span> <span data-ttu-id="4730a-137">虽然 Windows 支持在开发周期中可远程连接到设备的设备管理员的概念，但在行业 IoT 设备上，此类支持可能会造成威胁，尤其是在使用弱密码时。</span><span class="sxs-lookup"><span data-stu-id="4730a-137">Though Windows supports the notion of device administrators that can remotely connect to devices during a development cycle, such support on industry IoT devices can pose a threat, especially when weak passwords are used.</span></span> <span data-ttu-id="4730a-138">通常，建议不要在 IoT Core 设备上创建默认帐户或密码。</span><span class="sxs-lookup"><span data-stu-id="4730a-138">In general, we recommend that no default accounts or passwords be created on IoT Core devices.</span></span>

## <a name="lockdown-a-retail-image"></a><span data-ttu-id="4730a-139">锁定零售映像</span><span class="sxs-lookup"><span data-stu-id="4730a-139">Lockdown a retail image</span></span>
<span data-ttu-id="4730a-140">在常规用途计算设备（如 Pc）上，用户可以安装应用程序并更改设置，包括安全功能，以确保设备最适合其需求。</span><span class="sxs-lookup"><span data-stu-id="4730a-140">On general purpose computing devices, such as PCs, users can install applications and change settings, including for security features, to ensure the device best suits their needs.</span></span> <span data-ttu-id="4730a-141">大多数 IoT 设备是固定功能设备，不会在设备生存期内改变其用途。</span><span class="sxs-lookup"><span data-stu-id="4730a-141">The majority of the IoT devices are fixed-function-devices that will not change their purpose over the device lifetime.</span></span> <span data-ttu-id="4730a-142">它们会在其操作边界内接收软件更新或启用功能更新，如智能恒温器上改进的 UI 或温度规定。</span><span class="sxs-lookup"><span data-stu-id="4730a-142">They receive software updates or enable functional updates within their operational boundaries, such as an improved UI or temperature regulation on a smart thermostat.</span></span> <span data-ttu-id="4730a-143">此信息可用于通过只允许执行已知和受信任的代码来完全锁定 IoT 设备。</span><span class="sxs-lookup"><span data-stu-id="4730a-143">This information can be used to fully lockdown an IoT device by only allowing execution of known and trusted code.</span></span> <span data-ttu-id="4730a-144">Windows 10 IoT Core 上的 Device Guard 可以通过确保无法在锁定的设备上运行未知或不受信任的可执行代码来帮助保护 IoT 设备。</span><span class="sxs-lookup"><span data-stu-id="4730a-144">Device Guard on Windows 10 IoT Core can help protect IoT devices by ensuring that unknown or untrusted executable code cannot be run on locked-down devices.</span></span>

<span data-ttu-id="4730a-145">Microsoft 提供了 [全包式安全包](https://github.com/ms-iot/security/tree/master/TurnkeySecurity) ，有助于在 IoT 核心设备上启用关键安全功能。</span><span class="sxs-lookup"><span data-stu-id="4730a-145">Microsoft is providing the [Turnkey Security Package](https://github.com/ms-iot/security/tree/master/TurnkeySecurity) to facilitate the enablement of key security features on IoT Core devices.</span></span> <span data-ttu-id="4730a-146">这允许设备构建者创建完全锁定的 IoT 设备。</span><span class="sxs-lookup"><span data-stu-id="4730a-146">This lets device builders create fully locked down IoT devices.</span></span> <span data-ttu-id="4730a-147">此包将帮助你：</span><span class="sxs-lookup"><span data-stu-id="4730a-147">The package will help with:</span></span>

* <span data-ttu-id="4730a-148">设置安全启动密钥并在支持的 IoT 平台上启用该功能。</span><span class="sxs-lookup"><span data-stu-id="4730a-148">Provisioning Secure Boot keys and enabling the feature on supported IoT platforms.</span></span>
* <span data-ttu-id="4730a-149">使用 BitLocker 进行设备加密的设置和配置。</span><span class="sxs-lookup"><span data-stu-id="4730a-149">Setup and configuration of device encryption using BitLocker.</span></span> 
* <span data-ttu-id="4730a-150">启动设备锁定，只允许执行已签名的应用程序和驱动程序。</span><span class="sxs-lookup"><span data-stu-id="4730a-150">Initiating device lockdown to only allow execution of signed applications and drivers.</span></span>

<span data-ttu-id="4730a-151">[启用安全启动、BitLocker 和设备防护](https://docs.microsoft.com/windows/iot-core/secure-your-device/securebootandbitlocker)部分介绍了循序渐进指南。</span><span class="sxs-lookup"><span data-stu-id="4730a-151">Step-by-step guidance is described in the [Enabling Secure Boot, BitLocker, and Device Guard](https://docs.microsoft.com/windows/iot-core/secure-your-device/securebootandbitlocker) section.</span></span>

## <a name="device-production"></a><span data-ttu-id="4730a-152">设备生产</span><span class="sxs-lookup"><span data-stu-id="4730a-152">Device production</span></span>
<span data-ttu-id="4730a-153">锁定映像经过验证后，即可用于制造。</span><span class="sxs-lookup"><span data-stu-id="4730a-153">Once the lockdown image is validated, it can be used for manufacturing.</span></span> <span data-ttu-id="4730a-154">有关详细信息，请参阅 [IoT 核心制造](https://docs.microsoft.com/windows-hardware/manufacture/iot/)。</span><span class="sxs-lookup"><span data-stu-id="4730a-154">For more information, see [IoT Core manufacturing](https://docs.microsoft.com/windows-hardware/manufacture/iot/).</span></span>
