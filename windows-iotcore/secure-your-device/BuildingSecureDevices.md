---
title: 构建安全使用 Windows 10 IoT Core 设备
author: TorstenStein
ms.author: torstens
ms.date: 08/28/2017
ms.topic: article
description: 了解如何构建安全的设备通过启用安全启动，实现了 Tpm，和的详细信息。
keywords: windows iot、 安全性、 固件、 安全启动，TPM，Bitlocker 加密
ms.openlocfilehash: 611d82af25d9c4959335aa208e0d06b49daa5f9f
ms.sourcegitcommit: c4232e384e7347f97477e5cd3cc941de492f6a64
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/21/2019
ms.locfileid: "65986496"
---
# <a name="building-secure-devices-with-windows-10-iot-core"></a><span data-ttu-id="286c5-104">构建安全使用 Windows 10 IoT Core 设备</span><span class="sxs-lookup"><span data-stu-id="286c5-104">Building Secure Devices with Windows 10 IoT Core</span></span>

## <a name="introduction"></a><span data-ttu-id="286c5-105">简介</span><span class="sxs-lookup"><span data-stu-id="286c5-105">Introduction</span></span>  

<span data-ttu-id="286c5-106">使用 Windows 10 IoT Core 时，Microsoft 将强企业级安全功能，可以利用这些较小，资源受限类的 IoT 设备上。</span><span class="sxs-lookup"><span data-stu-id="286c5-106">With Windows 10 IoT Core, Microsoft is bringing strong enterprise grade security features that can be leveraged on smaller, resource constrained classes of IoT devices.</span></span> <span data-ttu-id="286c5-107">若要提供切实的益处这些安全功能，硬件平台还必须提供一种方法，若要定位到它们。</span><span class="sxs-lookup"><span data-stu-id="286c5-107">For these security features to offer tangible benefits, the hardware platform must also provide a means to anchor them.</span></span> <span data-ttu-id="286c5-108">本文档提供了概括性指导 OEM 设备构建者和安全意识制造商想要选择适当的硬件和生成、 配置和安全 IoT 设备寄给他们的客户。</span><span class="sxs-lookup"><span data-stu-id="286c5-108">This document provides high-level guidance to OEM device builders and security conscious 'Makers' who are looking to select appropriate hardware and build, configure, and ship a secure IoT device to their customers.</span></span>
<span data-ttu-id="286c5-109">![数据安全性](../media/SecurityFlowAndCertificates/DataRestExecutionMotion.png)</span><span class="sxs-lookup"><span data-stu-id="286c5-109">![Data Security](../media/SecurityFlowAndCertificates/DataRestExecutionMotion.png)</span></span>

## <a name="building-a-secure-iot-devices"></a><span data-ttu-id="286c5-110">构建安全的 IoT 设备</span><span class="sxs-lookup"><span data-stu-id="286c5-110">Building a secure IoT devices</span></span>  
<span data-ttu-id="286c5-111">本部分将通过构建 Windows IoT core 的安全 IoT 设备的过程帮助开发人员和 Oem。</span><span class="sxs-lookup"><span data-stu-id="286c5-111">This section will help developers and OEMs through the process of building secure IoT devices with Windows IoT Core.</span></span> <span data-ttu-id="286c5-112">我们将解决所选内容的支持平台的安全功能的硬件，以及启用的安全 IoT 设备的生产环境。</span><span class="sxs-lookup"><span data-stu-id="286c5-112">We will address the selection of hardware to support platform security features as well as the production of security enabled IoT devices.</span></span>

![设备生成过程](../media/SecurityFlowAndCertificates/DeviceBuildProcess.png)


## <a name="choosing-security-enabled-hardware"></a><span data-ttu-id="286c5-114">选择启用了安全硬件</span><span class="sxs-lookup"><span data-stu-id="286c5-114">Choosing security enabled hardware</span></span>
<span data-ttu-id="286c5-115">虽然 Windows IoT Core 构建到平台以保护客户数据的安全功能，它依赖于硬件的安全功能，以充分利用这些功能。</span><span class="sxs-lookup"><span data-stu-id="286c5-115">While Windows IoT Core has security capabilities build in to the platform to protect customer data, it relies on hardware security features to fully utilize these capabilities.</span></span> <span data-ttu-id="286c5-116">实际上，软件无法进行自我保护可操作内存并不存在信任锚点或可以通过单独的软件提供的不可变的设备标识。</span><span class="sxs-lookup"><span data-stu-id="286c5-116">In fact, software cannot protect itself as memory can be manipulated and there is no trust anchor or immutable device identity that can be provided through software alone.</span></span> <span data-ttu-id="286c5-117">有几种方法来提供基于硬件的安全，例如智能卡，受信任的平台模块 (TPM) 或安全功能构建到 SoC.</span><span class="sxs-lookup"><span data-stu-id="286c5-117">There are several ways to provide hardware-based security, e.g. smart cards, trusted platform modules (TPM) or security features build into the SoC.</span></span> 

<span data-ttu-id="286c5-118">详细了解受支持的硬件平台，请参阅部分[Soc 和自定义看板](https://docs.microsoft.com/en-us/windows/iot-core/learn-about-hardware/socsandcustomboards)</span><span class="sxs-lookup"><span data-stu-id="286c5-118">For more information about supported hardware platforms see section [SoCs and custom boards](https://docs.microsoft.com/en-us/windows/iot-core/learn-about-hardware/socsandcustomboards)</span></span> 

### <a name="trusted-platform-module"></a><span data-ttu-id="286c5-119">受信任的平台模块</span><span class="sxs-lookup"><span data-stu-id="286c5-119">Trusted Platform Module</span></span>
<span data-ttu-id="286c5-120">Windows IoT Core 使用 TPM 2.0 作为硬件的安全平台。</span><span class="sxs-lookup"><span data-stu-id="286c5-120">Windows IoT Core uses TPM 2.0 as hardware security platform.</span></span> <span data-ttu-id="286c5-121">Oem 建议使用一个硬件平台，提供要充分利用 Windows IoT Core 安全功能，例如 BitLocker、 安全启动、 Azure 凭据存储和其他人的 TPM 2.0。</span><span class="sxs-lookup"><span data-stu-id="286c5-121">OEMs are recommended to use a hardware platform that provides TPM 2.0 to fully take advantage of the Windows IoT Core security features such as BitLocker, Secure Boot, Azure credential storage and others.</span></span> <span data-ttu-id="286c5-122">有两个选项适用于生产设备为实现 TPM，作为离散 TPM (dTPM) 或固件 TPM (fTPM)。</span><span class="sxs-lookup"><span data-stu-id="286c5-122">There are two options for production devices to implements a TPM, as discreet TPM (dTPM) or as firmware TPM (fTPM).</span></span> <span data-ttu-id="286c5-123">可从多个制造商如 Infineon、 NazionZ 及其他离散 Tpm。</span><span class="sxs-lookup"><span data-stu-id="286c5-123">Discrete TPMs are available from several manufactures such as Infineon, NazionZ and others.</span></span> <span data-ttu-id="286c5-124">某些 SoC 制造商 BSP 的一部分提供 fTPM 实现。</span><span class="sxs-lookup"><span data-stu-id="286c5-124">Some SoC manufactures provided fTPM implementations as part of the BSP.</span></span> 

<span data-ttu-id="286c5-125">有关 Tpm 有关的详细信息，请[TPM 概述](https://docs.microsoft.com/en-us/windows/iot-core/secure-your-device/tpm)并[如何设置 TPM](https://docs.microsoft.com/en-us/windows/iot-core/secure-your-device/setuptpm)。</span><span class="sxs-lookup"><span data-stu-id="286c5-125">For more information about TPMs look [TPM Overview](https://docs.microsoft.com/en-us/windows/iot-core/secure-your-device/tpm) and [How to setup a TPM](https://docs.microsoft.com/en-us/windows/iot-core/secure-your-device/setuptpm).</span></span>

### <a name="storage-options"></a><span data-ttu-id="286c5-126">存储选项</span><span class="sxs-lookup"><span data-stu-id="286c5-126">Storage Options</span></span>
<span data-ttu-id="286c5-127">开发板，如常用的 Raspberry Pi 3，提供的灵活性，并允许开发人员能够轻松地启动任何平台通过可移动的 SD 卡。</span><span class="sxs-lookup"><span data-stu-id="286c5-127">Development boards, like the popular Raspberry Pi 3, offer flexibility and allow developers to easily boot any platform via a removable SD card.</span></span> <span data-ttu-id="286c5-128">适用于大多数行业 IoT 设备，这种灵活性是不可取的并可以使此类设备的攻击容易实现的目标。</span><span class="sxs-lookup"><span data-stu-id="286c5-128">For most industry IoT devices, such flexibility is not desirable and can make such devices an easy target for attacks.</span></span> <span data-ttu-id="286c5-129">相反，在设计时您的硬件，请考虑对较小的、 低成本 IoT 设备使用 eMMC 存储。</span><span class="sxs-lookup"><span data-stu-id="286c5-129">Instead, when designing your hardware, consider using an eMMC storage for your smaller, low cost IoT devices.</span></span> <span data-ttu-id="286c5-130">嵌入的存储可以大大增强其难度单独从设备的内容并反过来，降低了引入恶意软件到设备或数据被盗的可能性。</span><span class="sxs-lookup"><span data-stu-id="286c5-130">Embedded storage makes it significantly more difficult to separate the content from the device and in turn, reduces the potential of introducing malware onto the device or data theft.</span></span>

## <a name="creating-a-retail-image"></a><span data-ttu-id="286c5-131">创建零售映像</span><span class="sxs-lookup"><span data-stu-id="286c5-131">Creating a retail image</span></span> 
<span data-ttu-id="286c5-132">当[创建 Windows IoT Core 零售映像](https://docs.microsoft.com/windows-hardware/manufacture/iot/iot-core-manufacturing-guide)，确保没有开发人员工具，允许远程访问并且调试在生产系统上存在，将根据这些潜在可打开你的设备受到攻击。</span><span class="sxs-lookup"><span data-stu-id="286c5-132">When [Creating a Windows IoT Core retail image](https://docs.microsoft.com/windows-hardware/manufacture/iot/iot-core-manufacturing-guide), ensure that no developer tools that allow remote access and debug are present on production systems as these can potentially open your device to attacks.</span></span> <span data-ttu-id="286c5-133">请确保，如果使用像这样的开发人员工具[Windows Device Portal](https://docs.microsoft.com/en-us/windows/iot-core/manage-your-device/remotedisplay)， [FTP 服务器](https://docs.microsoft.com/en-us/windows/iot-core/connect-your-device/ftp)， [SSH](https://docs.microsoft.com/en-us/windows/iot-core/connect-your-device/ssh)，或者[PowerShell](https://docs.microsoft.com/en-us/windows/iot-core/connect-your-device/powershell)映像中在开发期间，您测试和验证您的方案不包括这些工具的零售 IoT 核心版映像上。</span><span class="sxs-lookup"><span data-stu-id="286c5-133">Make sure that, if you're using developer tools like [Windows Device Portal](https://docs.microsoft.com/en-us/windows/iot-core/manage-your-device/remotedisplay), [FTP Server](https://docs.microsoft.com/en-us/windows/iot-core/connect-your-device/ftp), [SSH](https://docs.microsoft.com/en-us/windows/iot-core/connect-your-device/ssh), or [PowerShell](https://docs.microsoft.com/en-us/windows/iot-core/connect-your-device/powershell) in your images during development, that you test and validate your scenarios on retail IoT Core images that do not include these tools.</span></span>

### <a name="user-accounts"></a><span data-ttu-id="286c5-134">用户帐户</span><span class="sxs-lookup"><span data-stu-id="286c5-134">User Accounts</span></span>
<span data-ttu-id="286c5-135">大多数用户都熟悉这一概念时取消装箱并设置凭据来访问设备执行"所有权"的电脑和手机的想法之类的设备的个性化设置设备。</span><span class="sxs-lookup"><span data-stu-id="286c5-135">Most users are familiar with the notion of taking "ownership" of devices like PCs and phones - the idea of personalizing the device when unboxed and setting up credentials to access the device.</span></span> <span data-ttu-id="286c5-136">与不同的使用者电脑和手机，IoT 设备不应作为常规用途计算设备。</span><span class="sxs-lookup"><span data-stu-id="286c5-136">Unlike consumer PCs and phones, IoT devices are not intended to serve as general purpose computing devices.</span></span> <span data-ttu-id="286c5-137">相反，它们是通常的单应用、 固定用途设备。</span><span class="sxs-lookup"><span data-stu-id="286c5-137">Instead, they are usually single-app, fixed purpose devices.</span></span> <span data-ttu-id="286c5-138">尽管 Windows 支持可以远程连接到设备在开发周期内的设备管理员的概念，工业 IoT 设备上的此类支持可能会带来威胁，尤其是在使用弱密码。</span><span class="sxs-lookup"><span data-stu-id="286c5-138">Though Windows supports the notion of device administrators that can remotely connect to devices during a development cycle, such support on industry IoT devices can pose a threat, especially when weak passwords are used.</span></span> <span data-ttu-id="286c5-139">一般情况下，Microsoft 建议，应在 Windows 10 IoT Core 设备上创建没有"default"帐户或密码。</span><span class="sxs-lookup"><span data-stu-id="286c5-139">In general, Microsoft recommends that no "default" accounts or passwords should be created on Windows 10 IoT Core devices.</span></span>

## <a name="lockdown-a-retail-image"></a><span data-ttu-id="286c5-140">锁定零售映像</span><span class="sxs-lookup"><span data-stu-id="286c5-140">Lockdown a retail image</span></span>
<span data-ttu-id="286c5-141">在常规用途计算设备，如 Pc，用户可以安装应用程序、 更改设置，包括安全功能，以最适合的设备将函数定义到套件其操作需要。</span><span class="sxs-lookup"><span data-stu-id="286c5-141">On general purpose computing devices, such as PCs, users can install applications, change settings, including for security features, to define the function of the device to suite best their operational needs.</span></span> <span data-ttu-id="286c5-142">IoT 设备的大多数都是固定的函数-的设备将设备生存期内更改目的。</span><span class="sxs-lookup"><span data-stu-id="286c5-142">The majority of the IoT devices are fixed-function-devices that will not change the purpose over the device lifetime.</span></span> <span data-ttu-id="286c5-143">这些设备仍会接收软件更新或启用的功能更新其操作的边界内，例如改进智能调温器上的用户界面或温度调整。</span><span class="sxs-lookup"><span data-stu-id="286c5-143">These devices will still receive software updates or enable functional updates within their operational boundaries, e.g. improved the user interface or temperature regulation on a smart thermostat.</span></span> <span data-ttu-id="286c5-144">此信息可以用于完全锁定 IoT 设备通过仅允许已知且受信任代码的执行。</span><span class="sxs-lookup"><span data-stu-id="286c5-144">This information can be used to fully lockdown an IoT device by only allowing execution of known and trusted code.</span></span> <span data-ttu-id="286c5-145">在 Windows 10 IoT Core 上的设备保护可帮助保护 IoT 设备通过确保未知或不受信任的可执行代码，不能锁定的设备上运行。</span><span class="sxs-lookup"><span data-stu-id="286c5-145">Device Guard on Windows 10 IoT Core can help protect IoT devices by ensuring that unknown or untrusted executable code cannot be run on locked-down devices.</span></span>

<span data-ttu-id="286c5-146">Microsoft 将提供[统包安全包](https://github.com/ms-iot/security/tree/master/TurnkeySecurity)以便于轻松启用 IoT Core 设备上的主要安全性功能，允许设备生成器以生成完全锁定 IoT 设备。</span><span class="sxs-lookup"><span data-stu-id="286c5-146">Microsoft is providing the [Turnkey Security Package](https://github.com/ms-iot/security/tree/master/TurnkeySecurity) to facilitate easy enablement of key security features on IoT Core devices, that allows device builders to build fully locked down IoT devices.</span></span> <span data-ttu-id="286c5-147">包将帮助了解：</span><span class="sxs-lookup"><span data-stu-id="286c5-147">The package will help with:</span></span>

* <span data-ttu-id="286c5-148">预配安全启动密钥和受支持的 IoT 平台上启用功能</span><span class="sxs-lookup"><span data-stu-id="286c5-148">Provisioning Secure Boot keys and enabling the feature on supported IoT platforms</span></span>
* <span data-ttu-id="286c5-149">安装和配置使用 BitLocker 设备加密</span><span class="sxs-lookup"><span data-stu-id="286c5-149">Setup and configuration of device encryption using BitLocker</span></span> 
* <span data-ttu-id="286c5-150">启动设备锁定为只允许已签名的应用程序和驱动程序的执行</span><span class="sxs-lookup"><span data-stu-id="286c5-150">Initiating device lockdown to only allow execution of signed applications and drivers</span></span>

<span data-ttu-id="286c5-151">分步指南中所述[启用安全引导、 BitLocker、 和 Device Guard](https://docs.microsoft.com/en-us/windows/iot-core/secure-your-device/securebootandbitlocker)部分。</span><span class="sxs-lookup"><span data-stu-id="286c5-151">A step-by-step guidance is described in the [Enabling Secure Boot, BitLocker, and Device Guard](https://docs.microsoft.com/en-us/windows/iot-core/secure-your-device/securebootandbitlocker) section.</span></span>

## <a name="device-production"></a><span data-ttu-id="286c5-152">设备生产</span><span class="sxs-lookup"><span data-stu-id="286c5-152">Device Production</span></span>
<span data-ttu-id="286c5-153">验证锁定映像后，它可以用于生产。</span><span class="sxs-lookup"><span data-stu-id="286c5-153">Once the lockdown image is validated it can be used for manufacturing.</span></span> <span data-ttu-id="286c5-154">有关详细信息请参阅[生产的 IoT Core](https://docs.microsoft.com/en-us/windows-hardware/manufacture/iot/)。</span><span class="sxs-lookup"><span data-stu-id="286c5-154">For more information see [IoT Core manufacturing](https://docs.microsoft.com/en-us/windows-hardware/manufacture/iot/).</span></span>
